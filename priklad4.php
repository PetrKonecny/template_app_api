<?

$A = [1,3,1,6];
$B = [2,4,8,1];
$n = 4;
$t = [];
$d = [];
for ($$l = 0; $$l < $n; $$l++){
  for($m=0; $m<n-$l ; $m++){
    for($k=$m; $k<=$m+$l ; $k++){

      if($l == $m){
      	$t[$l][$m][0] = $A[$l];
      	$t[$l][$m][1] = $B[$l];
      	$t[$l][$m][2] = 0;
      	$t[$l][$m][3] = 0;
      }

      $aa = max($t[$m][$m+$k][2] + $t[$m+$k+1][$m+$l][3], $t[$m][$m+$k][0] + $t[$m+$k+1][$m+$l][0]);
      $bb = max($t[$m][$m+$k][3] + $t[$m+$k+1][$m+$l][2], $t[$m][$m+$k][1] + $t[$m+$k+1][$m+$l][1]);
      $ab = max($t[$m][$m+$k][2] + $t[$m+$k+1][$m+$l][1], $t[$m][$m+$k][0] + $t[$m+$k+1][$m+$l][2]);
      $ba = max($t[$m][$m+$k][1] + $t[$m+$k+1][$m+$l][3], $t[$m][$m+$k][3] + $t[$m+$k+1][$m+$l][0]);

      if($t[$m][$m+$l][0] < $aa) {
         $t[$m][$m+$l][0]= $aa;
         $d[$m][$m+$l][0] = $k;
      }
      
      if($t[$m][$m+$l][1] < $bb) {
         $t[$m][$m+$l][1]= $bb;
         $d[$m][$m+$l][1] = $k;
      }

      if($t[$m][$m+$l][2] < $ab) {
         $t[$m][$m+$l][2]=$ab;
         $d[$m][$m+$l][2] = $k;
      }

      if($t[$m][$m+$l][3] < $ba) {
         $t[$m][$m+$l][3]= $ba;
         $d[$m][$m+$l][3] = $k;
      }
   }
}
}

echo max($t[0][3][0],$t[0][3][1],$t[0][3][2],$t[0][3][3]);

?>
